# 호텔픽 MVP 서비스 PRD (Product Requirements Document)

## 📋 프로젝트 개요

### 프로덕트명
**호텔픽 (HotelPick) MVP** - 아고다 CID 변환 서비스

### 프로덕트 목표
아고다 호텔 링크를 다양한 CID(파트너 할인)가 적용된 링크로 변환해주는 웹 서비스 개발
(기존 아고다줍줍/스캐너와 동일한 기능을 더 나은 UI/UX로 제공)

### 타겟 사용자
- **1차 타겟**: 해외여행 계획자 (20-40대), 가성비 중시 여행객
- **2차 타겟**: 비즈니스 출장자, 호텔 예약 초보자
- **사용자 니즈**: 아고다 호텔 예약 시 카드사/제휴사 할인 적용

---

## 🎯 MVP 핵심 목표

### 1. 기능적 목표
- **주요 목표**: 아고다 링크 → 다양한 CID 할인 링크 변환
- **보조 목표**: 기존 경쟁사보다 나은 사용자 경험 제공

### 2. 핵심 메시지 (A/B 테스트 적용)
**A/B 테스트 시스템**: localStorage 기반 사용자별 테스트 변형 저장
- **A버전 (감정적)**: "똑같은 호텔, 왜 비싸게 예약해요?"
  - 서브타이틀: "28개의 할인 옵션으로 평균 15% 절약하세요"
- **B버전 (개인적)**: "당신의 아고다 링크가 더 싸질 수 있어요"
  - 서브타이틀: "카드사부터 검색경로까지, 숨겨진 할인을 찾아드립니다"
- **C버전 (시간혜택)**: "10초만에 아고다 숨겨진 할인 찾기"
  - 서브타이틀: "링크 붙여넣기 한 번으로 28개 할인 옵션 비교"
- **가치 제안**: 평균 15% 추가 절약, 28개 할인 옵션 한번에 비교

---

## 🖥️ 서비스 구조 설계

### 메인 페이지 (엔바토 스타일 + 인터랙티브)
```
┌─────────────────────────────────────────────┐
│  호텔픽                                     │
│  [A/B 테스트 헤드라인 - 동적 생성]           │
│                                             │
│  [🔗 아고다 링크 입력창        ] [찾기]      │
│                                             │
│  ** 엔바토 스타일 2열 인터랙티브 섹션 **     │
│  ┌─────────────────┬─────────────────┐      │
│  │ 평균 15% 추가절약 │ [가격비교 비주얼] │ ←호버│
│  │ "10만원 절약" 후기 │ ₩180K → ₩156K   │  효과│
│  └─────────────────┴─────────────────┘      │
│                                             │
│  ┌─────────────────┬─────────────────┐      │
│  │ [옵션그리드 비주얼]│ 28개 할인옵션    │      │
│  │ BC/신한/국민/구글 │ "찾는 재미" 후기  │      │
│  └─────────────────┴─────────────────┘      │
│                                             │
│  ┌─────────────────┬─────────────────┐      │
│  │ 3초만에 완료     │ [단계별 비주얼]   │      │
│  │ "가격안바뀜" 후기 │ 1복사→2붙여넣기→3완료│      │
│  └─────────────────┴─────────────────┘      │
│                                             │
│  **검색 후: 결과 → 혜택섹션 순서 변경**      │
│  **hover시 opacity/scale 애니메이션**       │
└─────────────────────────────────────────────┘
```

### 결과 표시 섹션
```
┌─────────────────────────────────────────────┐
│  🏨 [호텔명] - [체크인~체크아웃]              │
├─────────────────────────────────────────────┤
│  💳 카드사 할인 링크                         │
│  BC카드         [새창에서 열기]               │
│  국민카드        [새창에서 열기]               │
│  신한카드        [새창에서 열기]               │
│  신한(마스터)     [새창에서 열기]               │
│  현대카드        [새창에서 열기]               │
│  하나카드        [새창에서 열기]               │
│  우리카드        [새창에서 열기]               │
│  토스           [새창에서 열기]               │
├─────────────────────────────────────────────┤
│  🔍 검색 경로별 링크                         │
│  구글지도1       [새창에서 열기]               │
│  구글지도2       [새창에서 열기]               │
│  구글검색1       [새창에서 열기]               │
│  네이버검색      [새창에서 열기]               │
├─────────────────────────────────────────────┤
│  ✈️ 항공사 제휴 링크                         │
│  대한항공        [새창에서 열기]               │
│  아시아나항공     [새창에서 열기]               │
│  에어서울        [새창에서 열기]               │
├─────────────────────────────────────────────┤
│  🔄 다시 검색하기                            │
└─────────────────────────────────────────────┘
```

---

## 🔧 핵심 기능 요구사항

### 1. 링크 입력 및 검증 시스템
**필수 기능**:
- 아고다 URL 유효성 실시간 검사
- 지원하는 URL 형식 패턴 매칭
- 기본 호텔 정보 추출 (호텔명, 체크인/아웃 날짜)
- 에러 메시지: "아고다 링크가 아닌 것 같습니다"

**URL 패턴 지원**:
```
✅ https://www.agoda.com/...
✅ https://agoda.com/...
✅ 모바일 링크 (m.agoda.com)
❌ 다른 사이트 링크
```

### 2. CID 변환 로직
**카드사 CID 목록**:
- BC카드, 국민카드, 신한카드, 신한(마스터)
- 현대카드, 하나카드, 우리카드, 우리(마스터)
- 토스, 마스터카드, 비자카드, 유니온페이, 카카오페이

**검색 경로 CID 목록**:
- 구글지도1/2/3, 구글검색1/2/3
- 네이버검색1, 기타 검색 포털

**항공사 제휴 CID 목록**:
- 대한항공, 아시아나항공, 에어서울
- 기타 제휴 항공사

**기타 제휴사 CID**:
- 모든 알려진 유효한 CID 값

### 3. 결과 표시 시스템
**카테고리 분류**:
- 카드사 할인 (우선 표시)
- 검색 경로별 링크
- 항공사 제휴 링크
- 기타 제휴사 링크

**링크 동작**:
- 모든 링크는 새창에서 열기 (`target="_blank"`)
- 링크 클릭 시 추적 이벤트 발생
- 복사 기능 제공

**클릭 상태 추적 기능**:
- 클릭한 링크는 시각적으로 구분 (배경색 변경, 버튼 라벨 변경)
- 클릭 상태는 localStorage에 저장하여 세션 간 유지
- "새창에서 열기" → "✓ 확인했어요" 텍스트 변경
- 클릭한 링크는 배경색을 어두운 색상으로 변경

**검색 필터 기능**:
- 카테고리별/개별 링크 검색 가능
- 카드사명, 항공사명, 검색경로명으로 필터링
- 실시간 검색 결과 표시
- 검색어 하이라이팅

**세션 지속성 기능**:
- 마지막 검색한 호텔 정보를 localStorage에 저장
- 브라우저 재시작 시 이전 검색 결과 자동 복원
- 동일한 호텔 재검색 시 클릭 상태 복원
- 검색 히스토리 최대 5개까지 저장 (선택사항)

---

## 🎨 디자인 요구사항

### UI/UX 원칙
1. **단순함**: 기존 경쟁사보다 깔끔하고 직관적
2. **모바일 퍼스트**: 반응형 디자인 필수
3. **속도**: 즉시 변환 결과 표시 (로딩 최소화)
4. **신뢰성**: 안전한 링크임을 시각적으로 표현

### 컬러 스킴 (SimplyCodesAI 다크 테마)
- **Primary**: #86FC4F (밝은 네온 그린) - 주요 액션 버튼, 강조
- **Background**: #0F0F0F (다크 블랙) - 메인 배경
- **Secondary Background**: #1A1A1A - 카드, 패널 배경
- **Border**: rgba(134, 252, 79, 0.2) - 그린 테두리
- **Text Primary**: #FFFFFF (화이트) - 메인 텍스트
- **Text Secondary**: #B0B0B0 - 보조 텍스트
- **Hover**: #1A1A1A - 호버 상태 배경

### 타이포그래피
- **헤드라인**: 28-32px, Bold
- **서브헤드라인**: 18-20px, Medium
- **본문**: 16px, Regular
- **버튼**: 16px, Medium

### 반응형 브레이크포인트
- **Mobile**: 320px - 767px
- **Tablet**: 768px - 1023px
- **Desktop**: 1024px+

---

## 📱 기술 요구사항

### Frontend 기술 스택
**기본 스택** (최소화):
- HTML5, CSS3, JavaScript (ES6+) - Vanilla JS 사용
- CSS: 커스텀 CSS (Tailwind 제거, 더 정밀한 컨트롤)
- Google Fonts: Noto Sans KR (한글 최적화)
- No Framework: 순수 DOM 조작으로 성능 최적화

**배포**:
- 정적 사이트 호스팅 (GitHub Pages 우선)
- 서버리스 구조 (클라이언트 사이드 변환)
- 최적화: 단일 HTML + CSS + JS 파일 구조

### 핵심 JavaScript 기능
```javascript
// A/B 테스트 시스템
const AB_TEST_VARIANTS = [
    {
        headline: "똑같은 호텔, 왜 비싸게 예약해요?",
        subtitle: "28개의 할인 옵션으로 평균 15% 절약하세요"
    },
    {
        headline: "당신의 아고다 링크가 더 싸질 수 있어요",
        subtitle: "카드사부터 검색경로까지, 숨겨진 할인을 찾아드립니다"
    },
    {
        headline: "10초만에 아고다 숨겨진 할인 찾기",
        subtitle: "링크 붙여넣기 한 번으로 28개 할인 옵션 비교"
    }
];

// CID 변환 로직 (ds 파라미터 생성)
const CID_MAP = {
  cards: {
    'bc': { cid: '2211799', affiliate: '2394660' },
    'kb': { cid: '2211799', affiliate: '2463816' },
    'shinhan': { cid: '2211799', affiliate: '2211800' },
    // ... ds 파라미터로 모든 카드사 CID 처리
  }
};

// URL 변환 함수 (ds 파라미터 적용)
function convertAgodaUrl(originalUrl, cidData) {
  const url = new URL(originalUrl);
  const dsValue = `${cidData.cid}.${cidData.affiliate}.0.0.0`;
  url.searchParams.set('ds', dsValue);
  return url.toString();
}

// 동적 섹션 재배치
function moveBenefitsSectionAfterResults() {
  // 검색 후 혜택 섹션을 결과 아래로 이동
}
```

### 데이터 저장
- **로컬 스토리지**: A/B 테스트 변형 저장 (abTestVariant)
- **검색 상태 저장**: 마지막 검색 결과 및 클릭 상태 (lastSearchResult)
- **클릭 추적**: 링크별 클릭 상태 (clicked_[linkKey])
- **세션 복원**: 페이지 재방문 시 이전 상태 자동 복원
- **검색 히스토리**: 최대 5개 호텔 검색 기록 (searchHistory)
- **No Database**: 서버 없이 동작
- **성능 최적화**: localStorage를 활용한 개인화

---

## 📊 성과 지표 (KPI)

### 사용 지표
- **링크 변환 횟수**: 일/주/월별 변환 횟수
- **인기 CID**: 가장 많이 사용되는 할인 유형
- **재방문율**: 사용자 재사용 빈도

### 기술 지표
- **페이지 로딩 속도**: 2초 이내
- **변환 처리 속도**: 0.5초 이내
- **모바일 사용성**: 95점 이상

### 품질 지표
- **변환 성공률**: 99% (유효한 아고다 링크 대상)
- **에러율**: 1% 이하
- **사용자 피드백**: 4.0/5.0 이상

---

## 🚀 개발 우선순위

### Phase 1: 핵심 기능 (1주차)
1. **HTML 구조 및 기본 UI**
   - 메인 페이지 레이아웃
   - 입력 폼 및 결과 표시 영역
   - 기본 반응형 디자인

2. **JavaScript 로직**
   - URL 검증 함수
   - CID 변환 로직
   - 결과 표시 함수

### Phase 2: UI/UX 개선 (2주차)
1. **디자인 고도화**
   - Tailwind CSS 적용
   - 카테고리별 시각적 구분
   - 로딩 상태 표시

2. **사용자 경험**
   - 에러 메시지 개선
   - 복사 기능 추가
   - 모바일 최적화

### Phase 3: 마무리 및 배포 (3주차)
1. **테스트 및 버그 수정**
   - 다양한 URL 패턴 테스트
   - 브라우저 호환성 확인
   - 모바일 디바이스 테스트

2. **배포 및 모니터링**
   - GitHub Pages 배포
   - Google Analytics 연동
   - 성능 최적화

---

## ⚠️ 제약사항 및 고려사항

### 기술적 제약사항
1. **클라이언트 사이드 한계**
   - 모든 로직이 브라우저에서 실행
   - 실시간 가격 비교 불가 (2단계 기능)
   - CID 값의 유효성 검증 제한

2. **보안 고려사항**
   - 사용자 개인정보 수집 최소화
   - 외부 링크 안전성 표시
   - XSS 공격 방지

### 법적 고려사항
- **이용약관**: 링크 변환 서비스임을 명시
- **책임 제한**: 할인 혜택 보장 불가 고지
- **개인정보**: 수집하지 않음 명시

### UX 고려사항
- **사용자 기대치**: 즉시 결과 표시 필요
- **신뢰성**: 안전한 서비스임을 어필
- **접근성**: 모든 사용자가 쉽게 사용 가능

---

## 📝 기술 명세

### HTML 구조
```html
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>호텔픽 - 아고다 최저가 찾기</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <main class="container mx-auto px-4 py-8">
    <!-- 헤더 -->
    <header class="text-center mb-8">
      <h1 class="text-3xl font-bold mb-2">🏨 호텔픽</h1>
      <p class="text-gray-600">아고다 최저가 찾기 서비스</p>
    </header>

    <!-- 입력 섹션 -->
    <section class="max-w-2xl mx-auto mb-8">
      <div class="flex gap-2 mb-4">
        <input type="url" id="agoda-url" placeholder="아고다 링크를 입력하세요"
               class="flex-1 px-4 py-2 border rounded-lg">
        <button id="convert-btn" class="px-6 py-2 bg-red-500 text-white rounded-lg">
          변환하기
        </button>
      </div>
    </section>

    <!-- 결과 섹션 -->
    <section id="results" class="hidden max-w-4xl mx-auto">
      <!-- 결과가 여기에 표시됩니다 -->
    </section>
  </main>

  <script src="script.js"></script>
</body>
</html>
```

### JavaScript 핵심 로직
```javascript
// CID 매핑 데이터
const CID_DATA = {
  cards: [
    { name: 'BC카드', cid: 'bc_cid_value' },
    { name: '국민카드', cid: 'kb_cid_value' },
    // ... 모든 카드사
  ],
  search: [
    { name: '구글지도1', cid: 'gm1_cid_value' },
    { name: '구글검색1', cid: 'gs1_cid_value' },
    // ... 모든 검색 경로
  ],
  airline: [
    { name: '대한항공', cid: 'kal_cid_value' },
    { name: '아시아나항공', cid: 'aar_cid_value' },
    // ... 모든 항공사
  ]
};

// URL 변환 함수
function convertUrls(originalUrl) {
  const results = {};

  Object.keys(CID_DATA).forEach(category => {
    results[category] = CID_DATA[category].map(item => ({
      name: item.name,
      url: addCidToUrl(originalUrl, item.cid)
    }));
  });

  return results;
}

// CID 추가 함수
function addCidToUrl(url, cid) {
  const urlObj = new URL(url);
  urlObj.searchParams.set('cid', cid);
  return urlObj.toString();
}
```

---

## ✅ 완료 기준

### 기능 완료 기준
- [ ] 아고다 URL 검증 기능 동작
- [ ] 모든 카테고리의 CID 변환 링크 생성
- [ ] 카테고리별 결과 정리 및 표시
- [ ] 새창에서 링크 열기 기능
- [ ] 모바일/데스크톱 반응형 디자인

### 품질 완료 기준
- [ ] 페이지 로딩 속도 2초 이내
- [ ] 변환 처리 속도 0.5초 이내
- [ ] 모든 주요 브라우저에서 동작
- [ ] 모바일 사용성 95점 이상

### 배포 완료 기준
- [ ] GitHub Pages 정상 배포
- [ ] 커스텀 도메인 연결 (선택)
- [ ] Google Analytics 연동
- [ ] 기본적인 SEO 최적화

---

## 📚 경쟁사 분석

### 기존 서비스 분석
1. **아고다줍줍**
   - 강점: 간단한 UI, 빠른 처리
   - 약점: 제한적인 CID 옵션, 오래된 디자인

2. **아고다스캐너**
   - 강점: 많은 CID 옵션
   - 약점: 복잡한 인터페이스, 모바일 최적화 부족

### 차별화 전략
1. **더 나은 UI/UX**: 깔끔하고 직관적인 디자인
2. **완벽한 모바일 최적화**: 모바일 우선 디자인
3. **빠른 처리 속도**: 즉시 결과 표시
4. **카테고리 정리**: 할인 유형별 명확한 분류

---

*본 PRD는 호텔픽 MVP 개발을 위한 상세 요구사항을 정의합니다.*
*최종 업데이트: 2025년 9월 13일*